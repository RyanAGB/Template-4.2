(function(b,c){var a=function(e,d){this.elem=e;this.$elem=c(e);this.options=d;this.metadata=this.$elem.data("plugin-options");$body=c("body");$html=c("html");$navbar=c(".navbar");$nav=c(".navbar-nav");$clone=$nav.clone();socialmedia=".socialmedia";sitename=function(){var g=document.getElementsByTagName("title")[0].innerHTML;if(g.indexOf("-")===-1){var f=g;siteName=g}else{var f=g.indexOf(" - ");siteName=g.substring(0,f)}return siteName};_ldbranding=c('<li data-menu="menu-branding"><a href="http://www.localdirectories.com.au/" target="_blank"></a></li>');$exclusions=["span","div","img","section","article","i","b","u","p"]};a.prototype={defaults:{customwidth:270,duration:400},init:function(){this.config=c.extend({},this.defaults,this.options,this.metadata);var d=this.browserDetect(1);if(d){this.browserPopup()}else{this.dom();this.menuFunctions()}return this},dom:function(){var h=c('<div id="jmm-content" ></div>'),j=c('<div class="jmm-fixed-menu"><div><span id="site-name"><p></p></span></div></div>'),k=c('<div class="jmm-menu" id="jmm-left" ></div><div class="jmm-menu" id="jmm-right" ></div>'),e=["facebook","twitter","tumblr","youtube","googlep"],i="",l="",o="",q=c(".socialmedia").length>0,n=!1,m=1,g=0,f=0,p={_all:function(){$navbar.prependTo(".navbar-placeholder");h.prependTo($body);c.each($body.children(),function(t,u){if(c(this).get(0).tagName!="SCRIPT"&&c(this).get(0).tagName!="STYLE"&&c(this).attr("id")!="jmm-content"){c(this).appendTo("#jmm-content")}});$body.prepend(k);c("#jmm-content").prepend(j);var s=["background","background-color","background-image","background-repeat","background-attachment","background-size","background-clip","background-attachment","background-origin"];for(var r=0,d=s.length;r<d;r++){h.css(s[r],$body.css(s[r]))}c(".jmm-fixed-menu #site-name p").html(sitename)},_left:function(){c('<i class="icon-menu left-trigger"></i>').prependTo(".jmm-fixed-menu");jQuery.fn.removeAttributes=function(){return this.each(function(){var r=c.map(this.attributes,function(t){return t.name});var s=c(this);if(s.hasClass("dropdown")){s.attr("data-menu","dropdown"+m);m++}s.filter(function(){return c.trim(c(this).text())===""}).remove();c.each(r,function(t,u){if(u!="href"&&u!="target"&&u!="data-menu"){s.removeAttr(u)}if(s.children().length>0){var v=s.children();v.removeAttributes()}})})};for(var d in $exclusions){if($exclusions[d]=="img"){$clone.find($exclusions[d]).remove()}else{$clone.find($exclusions[d]).contents().unwrap()}}$clone.removeAttributes();$clone.find(".fa-caret-right").remove();$clone.find("li[data-menu*='dropdown']").each(function(){c(this).children("a").prepend('<span data-trigger="'+c(this).attr("data-menu")+'"><i class="icon-right"></i></span>')});$clone.append(_ldbranding);$clone.prependTo("#jmm-left")},_right:function(){c('<i class="icon-dots right-trigger"></i>').appendTo(".jmm-fixed-menu");i+="<ul>";for(var r in e){if($body.find(".socialmedia .social-media."+e[r]).length>0){f++}}if(q&&f>0){i+='<li data-menu="dropdown" class="jmm-sm"><a href="javascript:void(0)"><i class="icon-social icon"></i> Social Media <span data-trigger="dropdown"><i class="icon-right" ></i></span></a><ul>';function s(u){switch(u){case"facebook":$socialmedia="Facebook";break;case"twitter":$socialmedia="Twitter";break;case"tumblr":$socialmedia="Tumblr";break;case"youtube":$socialmedia="Youtube";break;case"googlep":$socialmedia="Google Plus";break}return'<li><a href="'+t+'" target="_blank"> '+$socialmedia+"</a></li>"}for(var r in e){if($body.find(".social-media."+e[r]).length>0){var t=c(".social-media."+e[r]).attr("href"),d=s(e[r]);i+=d}}i+="</li></ul>"}if(c(".socialmedia .social-media.ld").length>0){i+='<li><a href="'+c(".socialmedia .social-media.ld").attr("href")+'" target="_blank"><i class="icon-ld icon"></i> Profile</a></li>'}i+="</ul>";c(i).prependTo("#jmm-right");if(c("#jmm-right > ul").children().length==0){c(".right-trigger").hide()}else{c(".right-trigger").show()}}};p._all();p._left();p._right()},reset:function(){var f=1;$clone=c(".navbar-nav").clone();jQuery.fn.removeAttributes=function(){return this.each(function(){var d=c.map(this.attributes,function(h){return h.name});var g=c(this);if(g.hasClass("dropdown")){g.attr("data-menu","dropdown"+f);f++}g.filter(function(){return c.trim(c(this).text())===""}).remove();c.each(d,function(h,j){if(j!="href"&&j!="target"&&j!="data-menu"){g.removeAttr(j)}if(g.children().length>0){var k=g.children();k.removeAttributes()}})})};for(var e in $exclusions){if($exclusions[e]=="img"){$clone.find($exclusions[e]).remove()}else{$clone.find($exclusions[e]).contents().unwrap()}}$clone.removeAttributes();$clone.find(".fa-caret-right").remove();$clone.find("li[data-menu*='dropdown']").each(function(){c(this).children("a").prepend('<span data-trigger="'+c(this).attr("data-menu")+'"><i class="icon-right"></i></span>')});$clone.append(_ldbranding);c("#jmm-left > ul").html($clone.html())},menuFunctions:function(){var p=c.extend({},this.defaults,this.options,this.metadata),k=c("#jmm-content"),n=c(".jmm-menu"),s=c("#jmm-left"),x=c("#jmm-left > ul"),E=document.getElementById("jmm-left"),H=c(".left-trigger"),v=c("#jmm-right"),m=c("#jmm-right > ul"),o=document.getElementById("jmm-right"),d=c(".right-trigger"),D=c(".jmm-fixed-menu"),j=document.querySelector("#site-name"),q=c("#site-name p"),f=c('.jmm-menu li[data-menu*="dropdown"] > a span[data-trigger*="dropdown"]'),G=c("#jmm-content > .backstretch").length>0,h=c("#jmm-content > .backstretch"),y,F=false,B=0,C=false,g=this.detectOS("any"),u=this.detectOS("ipad"),I=function(){if(!g||g&&screen.width>500){C=true}if(C){e()}clearTimeout(y);y=b.setTimeout(function(){i()},80);b.scrollTo(0,$body.scrollTop())},i=function(){if((j.offsetHeight<j.scrollHeight)){q.addClass("overflow-text")}else{if((j.offsetHeight>=j.scrollHeight)){q.removeClass("overflow-text")}}},z={openLeft:function(){z.beforeOpenLeft();$body.data("left",{menu:true});k.css("left",p.customwidth);D.css("left",p.customwidth);x.css("left",0);z.afterOpenLeft()},closeLeft:function(){z.beforeCloseLeft();$body.data("left",{menu:false});k.css("left",0);D.css("left",0);x.css("left",-p.customwidth);clearTimeout(y);y=setTimeout(function(){z.afterCloseLeft()},p.duration)},beforeOpenLeft:function(){s.show();$html.addClass("overflow-none");E.scrollTop=0},afterOpenLeft:function(){z.touchStop();t()},beforeCloseLeft:function(){},afterCloseLeft:function(){$html.removeClass("overflow-none");z.touchGo();clearTimeout(y);y=b.setTimeout(function(){s.hide()},80)},touchStop:function(){c("#jmm-content").bind("touchmove",function(r){r.preventDefault()});var l={};c("#jmm-left").on("touchstart",l,function(r){r.data.max=this.scrollHeight-this.offsetHeight;r.data.y=r.originalEvent.pageY}).on("touchmove",l,function(J){var r=J.data.y-J.originalEvent.pageY;if((r<0&&this.scrollTop<1)||(r>0&&this.scrollTop>=J.data.max)){J.preventDefault()}})},touchGo:function(){c("#jmm-content").off("touchmove",null)}},w={openRight:function(){w.beforeOpenRight();$body.data("right",{menu:true});k.css("left",-p.customwidth);D.css("left",-p.customwidth);m.css("right",0);w.afterOpenRight()},closeRight:function(){w.beforeCloseRight();$body.data("right",{menu:false});k.css("left",0);D.css("left",0);m.css("right",-p.customwidth);clearTimeout(y);y=setTimeout(function(){w.afterCloseRight()},p.duration)},beforeOpenRight:function(){v.show();$html.addClass("overflow-none");o.scrollTop=0},afterOpenRight:function(){w.touchStop();t()},beforeCloseRight:function(){},afterCloseRight:function(){$html.removeClass("overflow-none");w.touchGo();clearTimeout(y);y=b.setTimeout(function(){v.hide()},80)},touchStop:function(){c("#jmm-content").bind("touchmove",function(r){r.preventDefault()});var l={};c("#jmm-right").on("touchstart",l,function(r){r.data.max=this.scrollHeight-this.offsetHeight;r.data.y=r.originalEvent.pageY}).on("touchmove",l,function(J){var r=J.data.y-J.originalEvent.pageY;if((r<0&&this.scrollTop<1)||(r>0&&this.scrollTop>=J.data.max)){J.preventDefault()}})},touchGo:function(){c("#jmm-content").off("touchmove",null)}},e=function(){if($body.data("left").menu){z.closeLeft();z.afterCloseLeft()}if($body.data("right").menu){w.closeRight();w.afterCloseRight()}},A=function(){k.css("min-height",b.innerHeight)};$body.data("left",{menu:false});$body.data("right",{menu:false});H.on("click",function(l){if($body.data("left").menu){z.closeLeft()}else{z.openLeft()}});d.on("click",function(l){if($body.data("right").menu){w.closeRight()}else{w.openRight()}});d.click(function(l){l.stopPropagation()});H.click(function(l){l.stopPropagation()});k.click(function(){if($body.data("left").menu){z.closeLeft()}if($body.data("right").menu){w.closeRight()}});f.live("click",function(l){c('.jmm-menu li[data-menu="'+c(this).attr("data-trigger")+'"] > ul').toggleClass("display");c(this).find("i").toggleClass("icon-down icon-right");l.stopPropagation();l.preventDefault()});t();function t(){if(!g){if(x.height()<n.height()){n.css("overflow-y","hidden")}else{if(x.height()>n.height()){n.css("overflow-y","scroll")}}}}A();q.removeClass("overflow-text");setTimeout(function(){i()},5);c(b).bind("orientationchange",function(){I();A()});c(b).resize(function(){if(!g){I()}A()})},contactDetails:function(j){var d=null,f=null,i=null,l=null,g=null,o="",n="",k=c("#jmm-right > ul");try{if(j.phone){d=j.phone}}catch(i){}try{if(j.mobile){f=j.mobile}}catch(i){}try{if(j.email){i=j.email}}catch(i){}try{if(j.address){l=j.address}}catch(i){}try{if(j.hours){g=j.hours}}catch(i){}var q={_info:function(x,s,w,t,v){var y=/^(\+?1)?([1-9](00|55|66|77|88)[2-9](\d+))$/;if(x){u("Phone",x)}if(s){u("Mobile",s)}if(w){u("Email",w)}if(t){u("Address",t)}if(v){r("Trading Hours",v)}function u(z,m){switch(z){case"Phone":$icon="phone";o="tel";break;case"Mobile":$icon="mobile";o="tel";break;case"Email":$icon="email";o="mailto";break;case"Address":$icon="address";o="maps";break}if(z!="Address"){if(m.length==1||m.constructor!=Array){switch(z){case"Phone":m=m.toString();var B=m.match(y);if(B){m="//+"+m}else{if(m.charAt(0)=="0"){m=m.substring(1);m="//+61"+m}else{m="//+61"+m}}break;case"Mobile":m=m.toString();var B=m.match(y);if(B){m="//+"+m}else{if(m.charAt(0)=="0"){m=m.substring(1);m="//+61"+m}else{m="//+61"+m}}break}n+='<li><a href="'+o+":"+m+'"><i class="icon-'+$icon+' icon"></i> '+z+"</a></li>"}if(m.length>1&&m.constructor==Array){var E=m;c.each(E,function(J,H){num=J+1;switch(z){case"Phone":E[J]=E[J].toString();var I=E[J].match(y);if(I){E[J]="//+"+E[J]}else{if(E[J].charAt(0)=="0"){E[J]=E[J].substring(1);E[J]="//+61"+E[J]}else{E[J]="//+61"+E[J]}}break;case"Mobile":E[J]=E[J].toString();var I=E[J].match(y);if(I){E[J]="//+"+E[J]}else{if(E[J].charAt(0)=="0"){E[J]=E[J].substring(1);E[J]="//+61"+E[J]}else{E[J]="//+61"+E[J]}}break}n+='<li><a href="'+o+":"+E[J]+'"><i class="icon-'+$icon+' icon"></i> '+z+" "+num+"</a></li>"})}}else{var D=t.toString(),h=navigator.userAgent.toLowerCase(),p=navigator.platform,G="",e;c.browser.device=h.match(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera/i)?h.match(/android|webos|iphone|ipad|ipod|blackberry|iemobile|opera/i)[0]:false;if(c.browser.device){switch(c.browser.device){case"iphone":case"ipad":case"ipod":function F(){if(/iP(hone|od|ad)/.test(navigator.platform)){var H=(navigator.appVersion).match(/OS (\d+)_(\d+)_?(\d+)?/);return[parseInt(H[1],10),parseInt(H[2],10),parseInt(H[3]||0,10)]}}var A=F()||[0];if(A[0]>=6){G="http://maps.apple.com/?q="}else{G="http://maps.google.com/maps"}break;case"android":default:G="http://maps.google.com/maps";break}var C=G+encodeURIComponent(D);n+='<li><a href="'+C+'" target="_blank"><i class="icon-address icon"></i> Address</a></li>'}else{n+='<li><a href="http://maps.google.com/maps?q='+encodeURIComponent(D)+'" target="_blank"><i class="icon-address icon"></i> Address</a></li>'}}}function r(p,m){n+='<li data-menu="dropdown2" class="jmm-sm"><a href="javascript:void(0)"><i class="fa fa-clock icon"></i> Trading Hours <span data-trigger="dropdown2"><i class="icon-right"></i></span></a><ul class="jmm-hours">';for(var e in m){n+="<li><a> <span>"+m[e][0]+":</span> "+m[e][1]+"</a></li>"}n+="</ul></li>"}c(n).prependTo(k)}};d!=null||f!=null||i!=null||l!=null||g!=null?q._info(d,f,i,l,g):false;if(c("#jmm-right > ul").children().length==0){c(".right-trigger").hide()}else{c(".right-trigger").show()}},browserPopup:function(){var l=c.extend({},this.defaults,this.options,this.metadata),n=this.browserDetect(0),m=c('<div class="popup-con"></div>'),e=c('<div class="popup-bar"><div class="container"><div class="popup-t">Your browser ('+n+') is out of date and <b>may not display this website properly</b> <span class="popup-expand">Click here to update!</span></div> </div>			<div class="popup-text"><div class="container">			<p>Local Directories&trade; recommends <b>Google Chrome</b>.</p>			<div id="popup-browsers">			<div class="br firefox"><a href="http://www.mozilla.org/en-US/firefox/new/" target="_blank"><img src="http://cdn.myld.com.au/1/bootstrap/3.0.0/css/img/firefox.jpg" alt="firefox"> <span>Download <i>Mozilla Firefox</i></span></a></div>			<div class="br chrome"><a href="https://www.google.com/intl/en/chrome/browser/" target="_blank"><img src="http://cdn.myld.com.au/1/bootstrap/3.0.0/css/img/chrome.jpg" alt="chrome"> <span>Download <i>Google Chrome</i></span></a></div>			<div class="br safari"><a href="http://www.apple.com/au/safari/" target="_blank"><img src="http://cdn.myld.com.au/1/bootstrap/3.0.0/css/img/safari.jpg" alt="safari"> <span>Download <i>Apple Safari</i></span></a></div>			</div>			<p class="popup-more">Or <a>click here</a> to choose another free browser</p>			</div><span class="popup-collapse"></span></div>  <span class="popup-hide"></span></div>'),k=document.createElement("link");k.type="text/css";k.rel="stylesheet";k.href="http://cdn.myld.com.au/1/bootstrap/3.0.0/css/popup.min.css";$navbar.prependTo(".navbar-placeholder");document.getElementsByTagName("head")[0].appendChild(k);$body.addClass("popup");m.prependTo($body);$popup_con=c(".popup-con");c.each($body.children(),function(q,r){if(c(this).get(0).tagName!="SCRIPT"&&c(this).get(0).tagName!="STYLE"&&c(this).attr("class")!="popup-con"){c(this).appendTo($popup_con)}});e.prependTo($body);if(c.browser.msie&&parseFloat(c.browser.version)<8){l.duration=0}var d=c(".popup-bar"),o=c(".popup-text"),h=c(".popup-hide"),g=c(".popup-expand"),i=c(".popup-collapse"),j=c(".popup-more"),p=c(".popup-bar .popup-t"),f=p.height();h.click(function(){o.slideUp(l.duration);d.slideUp(l.duration);$popup_con.animate({top:0},l.duration)});g.click(function(){o.slideDown(l.duration);d.addClass("expanded");h.fadeOut(0);i.fadeIn(l.duration)});i.click(function(){o.slideToggle(l.duration);d.toggleClass("expanded");i.fadeOut(0);h.fadeIn(l.duration*3)});j.click(function(){c(".br.firefox").addClass("show");c(".br.safari").addClass("show");j.animate({opacity:0})});c(b).bind("laod resize orientationchange",function(){if(d.is(":visible")){$popup_con.animate({top:p.height()},0)}})},detectOS:function(e){var d={Android:function(){return navigator.userAgent.match(/Android/i)?true:false},BlackBerry:function(){return navigator.userAgent.match(/BlackBerry/i)?true:false},iOS:function(){return navigator.userAgent.match(/iPhone|iPad|iPod/i)?true:false},iPad:function(){return navigator.userAgent.match(/iPad/i)?true:false},Windows:function(){return navigator.userAgent.match(/IEMobile/i)?true:false},any:function(){return(d.Android()||d.BlackBerry()||d.iOS()||d.iPad()||d.Windows())}};switch(e){case"android":return d.Android();break;case"blackberry":return d.Blackberry();break;case"ios":return d.iOS();break;case"ipad":return d.iPad();break;case"windows":return d.Windows();break;case"any":return d.any();break}},browserDetect:function(e){var d={init:function(){this.browser=this.searchString(this.dataBrowser)||"An unknown browser";this.version=this.searchVersion(navigator.userAgent)||this.searchVersion(navigator.appVersion)||"an unknown version";this.OS=this.searchString(this.dataOS)||"an unknown OS"},searchString:function(n){for(var k=0;k<n.length;k++){var l=n[k].string;var m=n[k].prop;this.versionSearchString=n[k].versionSearch||n[k].identity;if(l){if(l.indexOf(n[k].subString)!=-1){return n[k].identity}}else{if(m){return n[k].identity}}}},searchVersion:function(l){var k=l.indexOf(this.versionSearchString);if(k==-1){return}return parseFloat(l.substring(k+this.versionSearchString.length+1))},dataBrowser:[{string:navigator.userAgent,subString:"Chrome",identity:"Chrome"},{string:navigator.userAgent,subString:"OmniWeb",versionSearch:"OmniWeb/",identity:"OmniWeb"},{string:navigator.vendor,subString:"Apple",identity:"Safari",versionSearch:"Version"},{prop:b.opera,identity:"Opera",versionSearch:"Version"},{string:navigator.vendor,subString:"iCab",identity:"iCab"},{string:navigator.vendor,subString:"KDE",identity:"Konqueror"},{string:navigator.userAgent,subString:"Firefox",identity:"Firefox"},{string:navigator.vendor,subString:"Camino",identity:"Camino"},{string:navigator.userAgent,subString:"Netscape",identity:"Netscape"},{string:navigator.userAgent,subString:"MSIE",identity:"Explorer",versionSearch:"MSIE"},{string:navigator.userAgent,subString:"Gecko",identity:"Mozilla",versionSearch:"rv"},{string:navigator.userAgent,subString:"Mozilla",identity:"Netscape",versionSearch:"Mozilla"}],dataOS:[{string:navigator.platform,subString:"Win",identity:"Windows"},{string:navigator.platform,subString:"Mac",identity:"Mac"},{string:navigator.userAgent,subString:"iPhone",identity:"iPhone/iPod"},{string:navigator.platform,subString:"Linux",identity:"Linux"}]};d.init();if(d.browser+d.version=="Mozilla11"){$html.addClass("ie");$html.addClass("ie11")}else{if(d.browser=="Explorer"){$html.addClass("ie");$html.addClass("ie"+d.version)}else{$html.addClass(d.browser.toLowerCase());$html.addClass(d.browser.toLowerCase()+d.version)}}var g=false,h=false,f=false,j="";if(d.browser=="Safari"&&d.version<6&&d.OS!="iPhone/iPod"){f=true}if(d.browser=="Explorer"&&d.version<9){f=true}if(e==1){return f}else{if(e==0){if(d.browser=="Explorer"){d.browser="Internet Explorer"}j=d.browser+" "+d.version;return j}else{if(e=="version"){var i=d;return i}}}}};a.defaults=a.prototype.defaults;c.fn.jmm=function(d){return this.each(function(){new a(this,d).init()})};c.jmm=function(d){return new a(document.body,d).init()};b.Plugin=a})(window,jQuery);(function(b,c){var a=function(e,d){this.elem=e;this.$elem=c(e);this.options=d};a.prototype={defaults:{ico:null},init:function(){this.config=c.extend({},this.defaults,this.options,this.metadata);var e=this.options.split(",");for(var d in e){fav=e[d].replace(/^\s+|\s+$/g,"");if(fav.toLowerCase().indexOf(".ico")>=0){c('<link rel="icon" type="image/x-icon" href="'+fav+'" />').appendTo("head");c('<link rel="shortcut icon" type="image/x-icon" href="'+fav+'" />').appendTo("head")}else{if(fav.toLowerCase().indexOf(".png")>=0){c('<link rel="icon" type="image/png" href="'+fav+'" />').appendTo("head")}}}return this}};a.defaults=a.prototype.defaults;c.fn.favicon=function(d){return this.each(function(){new a(this,d).init()})};c.favicon=function(d){return new a(document.body,d).init()};b.Plugin=a})(window,jQuery);var menu=$.jmm();